# openclaw-agi (prototype)

> NOTE: This repository was generated by LLMs as a quick prototype. Expect rough edges.

A **recursive self-improvement pipeline** for OpenClaw / Clawdbot session traces (JSONL).

Core idea: mine grounded signals from real agent work, roll them up into clusters, convert those into tickets (or ticket IR), then drive research briefs and experiments. Repeat.

## Vision (grounded, but ambitious)

This repo is a **prototype** of a recursive improvement loop: turn real OpenClaw / Clawdbot traces into **grounded signals**, cluster them into **repeatable problems**, route them into **tickets and research briefs**, and ship **verified fixes**—then measure the deltas and repeat. The long-term vision is a **networked self-improvement platform** where many agents and teams share **PII-scrubbed rollups**, evaluation results, and fixes as a common, continuously-updated substrate:

- **Brokering problems and solutions:** signals → rollups → tickets → research → experiments → fixes, with provenance and measurable outcomes.
- **Shared “notes” for agents:** validated patterns, mitigations, and playbooks that propagate across deployments—not just within one agent.
- **A marketplace of improvements:** contributors propose changes; experiments and metrics arbitrate; the best fixes spread.
- **Incentives + reputation:** reward improvements that reduce failure rates, increase task success, or improve user experience—backed by evidence.
- **Human-visible evidence:** every claim links back to concrete sessions, diffs, and before/after metrics.

Could this plausibly contribute to **AGI**? Not by itself. But it *could* be a credible path toward **compounding capability growth**: if many agents can **self-improve** from real work, **share their notes** (sanitized rollups, briefs, and fixes), and converge on improvements through **rigorous evaluation**, the system starts to resemble a distributed R&D engine—one that can accumulate general skills, reduce brittleness, and accelerate iteration across tasks and domains. Whether that reaches AGI depends on hard prerequisites (scaling, generalization, safety, governance, and trustworthy eval), but the core bet here is simple: **tight feedback loops + shared, evidence-backed learning at scale** could move the frontier faster than isolated fine-tuning or one-off prompt tweaks.

## Pipeline (end-to-end)

1) **Mine signals** from session JSONL (errors, frustration, suggestions, proactive opportunities, delight)
2) **Roll up** signals into clusters with fingerprints + ranking
3) **Export ticket IR** for any ticket system (optional)
4) **Create/update tickets** in Phorge (optional)
5) **Generate research briefs** for top items
6) **Run experiments + fixes**, then re-run the pipeline

## Install

```bash
cd /home/debian/clawd/home/rlm-session-analyzer
python -m venv .venv
source .venv/bin/activate
pip install -U pip
pip install -e .
```

## 1) Mine self-improvement signals

Kinds emitted by the LLM:
- error
- user_frustration
- improvement_suggestion
- experiment_suggestion
- proactive_opportunity
- user_delight
- other

Example:

```bash
openclaw-trace mine-signals \
  --sessions-dir /home/debian/.clawdbot/agents/main/sessions \
  --include "**/*.jsonl" \
  --max-sessions 120 \
  --out-jsonl out_signals.jsonl \
  --out-json out_signals.json
```

Disable the LLM (heuristic-only, no API key required):

```bash
openclaw-trace mine-signals \
  --sessions-dir /home/debian/.clawdbot/agents/main/sessions \
  --max-sessions 50 \
  --llm none \
  --out-jsonl out_signals.jsonl
```

## 2) Roll up signals (clusters + ranking)

```bash
openclaw-trace rollup-signals \
  --in-jsonl out_signals.jsonl \
  --out-json rollup.json \
  --out-md rollup.md
```

Optional merge pass (lexical + LLM confirm):

```bash
openclaw-trace rollup-signals \
  --in-jsonl out_signals.jsonl \
  --out-json rollup.json \
  --out-md rollup.md \
  --merge-similar \
  --merge-llm --llm openai
```

Rollups include `fingerprint_id` and a lightweight `kind_v2` mapping.

## 3) Export ticket IR (for non-Phorge users)

```bash
python scripts/export_ticket_ir.py \
  --in-json rollup.json \
  --out-jsonl ticket_ir.jsonl
```

This IR is system-agnostic and can be imported into any ticketing system.

## 4) Create/update Phorge tickets (optional)

```bash
python scripts/ticket_rollup.py \
  --in-json rollup.json \
  --dry-run
```

Or from ticket IR:

```bash
python scripts/ticket_rollup.py \
  --in-jsonl ticket_ir.jsonl \
  --dry-run
```

Remove `--dry-run` to create/update tasks.

## 5) Research briefs (headless)

Template:

```
docs/research-briefs/BRIEF_TEMPLATE.md
```

Run (Claude Code + optional Codex critic):

```bash
python scripts/run_research_brief.py \
  --ticket-id 145 \
  --context rollup.json \
  --critic
```

Actor‑critic (Codex checks each section as it’s drafted):

```bash
python scripts/run_research_brief.py \
  --ticket-id 145 \
  --context rollup.json \
  --actor-critic
```

Actor‑critic defaults to **evidence‑first** (draft Evidence snapshot first, then use it as context).

By default the brief runner also attaches **related local briefs** (top 3 keyword matches from `docs/research-briefs`). Disable with `--no-related-briefs`.

## Privacy / PII

- `mine-signals` is instructed not to emit PII, but v1 redaction is minimal.
- `rollup-signals` redacts summaries and avoids verbatim evidence quotes.
- If you need hard guarantees, add a dedicated redaction step.

## Notes / limitations

- The safe-exec sandbox is a best-effort guardrail, not a security boundary.
- For very large trace corpora, add an on-disk index + lazy windows.

## API key behavior

- Default is `--llm openai`. If `OPENAI_API_KEY` is missing, the CLI exits (no silent fallback).
- Use `--llm none` only for dry runs / testing.

## Daily pipeline script (no cron)

The script runs the full loop and writes all outputs to a timestamped folder.
OpenClaw should own the cron/scheduling so it can review daily progress.

```bash
scripts/run_daily_pipeline.sh
```

Env overrides:
- `SESSIONS_DIR`, `INCLUDE_GLOB`, `MAX_SESSIONS`, `OUT_ROOT`
- `MERGE_SIMILAR=1|0`, `MERGE_LLM=1|0`, `TICKET_CREATE=1|0`
